# ~!Setup Required!~
# This requires a command block setup in a loaded chunk connected to a running clock:
# testfor @a[score_fishing_min=1] 
# (testing for everyone for a min. score of 1 (whatever you want the winning score to be))

# There needs to be a comparator running off the first command block that runs another commandblock containing:
# say @a[score_fishing_min=1] Wins the fishing Contest!
# (announce (anyone with a score equal to 1) Wins the fishing Contest!)


"Fishing Contest":
    type: world
    events:
    #Join
    #Leave
    #Start
        on fishingcontest command:
        - determine passively fulfilled
        - define command <context.parsed_args.get[1]>
        - define winner <context.parsed_args.get[2]>
        - execute as_server "scoreboard objectives add fishing stat.fishCaught Fishing_Contest"
        - execute as_server "scoreboard objectives setdisplay sidebar fishing"
        
        
        - if <def[command]> = join inject "Join Contest"
        - if <def[command]> = leave inject "Leave Contest"
        - if <def[command]> = start inject "Start Contest"
        - if <def[command]> = stop inject "Stop Contest"
        - if <def[command]> = win inject "Winner of Contest"
        
"Join Contest":
    type: task
    script:
    - announce "<player.name> has joined the fishing contest!"
    - announce "<&sq>/<red>fishingcontest join<white><&sq> to join in the game!"
    - execute as_server "scoreboard player add <player.name> fishing 0"

"Leave Contest":
    type: task
    script:
    - announce "<player.name> has left the fishing contest"
    - execute as_server "scoreboard player reset <player.name>"

"Start Contest":
    type: task
    script:
    - announce "Starting Fishing Contest to 10 Fish!"
 
"Stop Contest":
    type: task
    script:
    - announce "Stopping fishing contest"
    - execute as_server "scoreboard objectives remove fishing"

    
"Winner of Contest":
    type: task
    script:
    - announce "<def[winner]> has won the fishing contest!"
    - announce "<&sq>/<red>fishingcontest stop<&sq> to reset the board and scores."